<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Explorer - Country Information</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/speech-synthesis@latest/dist/speech-synthesis.min.js"></script>
    <style>
        #map { height: 500px; }
        .country-card:hover { transform: translateY(-5px); }
        .dark-mode { background-color: #1a202c; color: #e2e8f0; }
        .dark-mode .bg-white { background-color: #2d3748 !important; }
        .dark-mode .text-gray-800 { color: #e2e8f0 !important; }
        .dark-mode .border-gray-200 { border-color: #4a5568 !important; }
        [hidden] { display: none !important; }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8">
        <!-- Header with Toggles -->
        <header class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-blue-600">World Explorer</h1>
            <div class="flex space-x-4">
                <button id="languageToggle" class="px-3 py-1 bg-gray-200 rounded-md">বাংলা</button>
                <button id="darkModeToggle" class="px-3 py-1 bg-gray-200 rounded-md">Dark</button>
                <button id="aiButton" class="px-3 py-1 bg-blue-100 rounded-md flex items-center">
                    <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    AI
                </button>
            </div>
        </header>

        <!-- Search Bar with Autocomplete -->
        <div class="relative mb-8">
            <input id="searchInput" type="text" placeholder="Search for a country..." 
                   class="w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <div id="autocompleteResults" class="absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg hidden"></div>
        </div>

        <!-- Main Content -->
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Left Sidebar - Continent/Country Selection -->
            <div class="lg:w-1/4">
                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h2 class="text-xl font-bold mb-4">Select Continent</h2>
                    <div id="continentButtons" class="grid grid-cols-2 gap-2">
                        <!-- Continents will be added here by JavaScript -->
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-bold mb-4">Countries</h2>
                    <div id="countryList" class="space-y-2 max-h-96 overflow-y-auto">
                        <!-- Countries will be added here by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="lg:w-3/4">
                <!-- Map Container -->
                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h2 class="text-xl font-bold mb-4">World Map</h2>
                    <div id="map" class="rounded-lg"></div>
                </div>

                <!-- Country Information -->
                <div id="countryInfo" class="bg-white p-6 rounded-lg shadow-md mb-6 hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h2 id="countryName" class="text-2xl font-bold"></h2>
                        <button id="speakButton" class="p-2 bg-blue-100 rounded-full">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                            </svg>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Basic Info -->
                        <div>
                            <h3 class="text-lg font-semibold mb-2">Basic Information</h3>
                            <div class="space-y-2">
                                <p><span class="font-semibold">Area:</span> <span id="countryArea">-</span> km²</p>
                                <p><span class="font-semibold">Population:</span> <span id="countryPopulation">-</span></p>
                                <p><span class="font-semibold">Capital:</span> <span id="countryCapital">-</span></p>
                                <p><span class="font-semibold">Currency:</span> <span id="countryCurrency">-</span></p>
                                <p><span class="font-semibold">Languages:</span> <span id="countryLanguages">-</span></p>
                                <p><span class="font-semibold">Timezone:</span> <span id="countryTimezone">-</span></p>
                                <p><span class="font-semibold">Tourist Visa:</span> <span id="countryVisa">-</span></p>
                            </div>
                        </div>

                        <!-- Flag and Weather -->
                        <div>
                            <div class="mb-4">
                                <h3 class="text-lg font-semibold mb-2">Flag</h3>
                                <img id="countryFlag" src="" alt="Country Flag" class="h-24 border">
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold mb-2">Weather</h3>
                                <div id="countryWeather" class="flex items-center space-x-4">
                                    <div id="weatherIcon" class="text-4xl">☀️</div>
                                    <div>
                                        <p><span class="font-semibold">Condition:</span> <span id="weatherCondition">-</span></p>
                                        <p><span class="font-semibold">Temperature:</span> <span id="weatherTemp">-</span>°C</p>
                                        <p><span class="font-semibold">Humidity:</span> <span id="weatherHumidity">-</span>%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tourist Attractions -->
                    <div class="mt-6">
                        <h3 class="text-lg font-semibold mb-2">Most Visited Places</h3>
                        <div id="touristPlaces" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Comparison Tool -->
                <div id="comparisonTool" class="bg-white p-6 rounded-lg shadow-md mb-6 hidden">
                    <h2 class="text-xl font-bold mb-4">Country Comparison</h2>
                    <div class="flex flex-wrap gap-4 mb-4">
                        <select id="compareCountry1" class="p-2 border rounded-md"></select>
                        <select id="compareCountry2" class="p-2 border rounded-md"></select>
                        <button id="compareButton" class="px-4 py-2 bg-blue-600 text-white rounded-md">Compare</button>
                    </div>
                    <div id="comparisonResults" class="hidden">
                        <!-- Comparison results will be shown here -->
                    </div>
                </div>

                <!-- Currency Converter -->
                <div id="currencyConverter" class="bg-white p-6 rounded-lg shadow-md mb-6 hidden">
                    <h2 class="text-xl font-bold mb-4">Currency Converter</h2>
                    <div class="flex flex-wrap items-center gap-4">
                        <input type="number" id="convertAmount" class="p-2 border rounded-md w-24" value="1">
                        <select id="convertFrom" class="p-2 border rounded-md"></select>
                        <span>to</span>
                        <select id="convertTo" class="p-2 border rounded-md"></select>
                        <button id="convertButton" class="px-4 py-2 bg-blue-600 text-white rounded-md">Convert</button>
                    </div>
                    <div id="conversionResult" class="mt-4 text-xl font-semibold hidden"></div>
                </div>

                <!-- Save/Export Button -->
                <div class="flex justify-end">
                    <button id="exportButton" class="px-4 py-2 bg-green-600 text-white rounded-md flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                        </svg>
                        Export as PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Main Application
        document.addEventListener('DOMContentLoaded', function() {
            // State management
            const state = {
                currentCountry: null,
                countries: [],
                continents: {},
                darkMode: false,
                language: 'en',
                savedCountries: []
            };

            // DOM Elements
            const elements = {
                continentButtons: document.getElementById('continentButtons'),
                countryList: document.getElementById('countryList'),
                map: document.getElementById('map'),
                countryInfo: document.getElementById('countryInfo'),
                searchInput: document.getElementById('searchInput'),
                autocompleteResults: document.getElementById('autocompleteResults'),
                darkModeToggle: document.getElementById('darkModeToggle'),
                languageToggle: document.getElementById('languageToggle'),
                speakButton: document.getElementById('speakButton'),
                exportButton: document.getElementById('exportButton'),
                aiButton: document.getElementById('aiButton'),
                comparisonTool: document.getElementById('comparisonTool'),
                currencyConverter: document.getElementById('currencyConverter')
            };

            // Initialize the map
            const map = L.map('map').setView([20, 0], 2);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            // Fetch all countries data
            fetch('https://restcountries.com/v3.1/all')
                .then(response => response.json())
                .then(data => {
                    state.countries = data;
                    organizeByContinent();
                    renderContinents();
                    populateSearchAutocomplete();
                    populateComparisonSelects();
                    populateCurrencySelects();
                });

            // Organize countries by continent
            function organizeByContinent() {
                state.continents = {
                    'Africa': [],
                    'Antarctica': [],
                    'Asia': [],
                    'Europe': [],
                    'North America': [],
                    'Oceania': [],
                    'South America': []
                };

                state.countries.forEach(country => {
                    if (country.continents) {
                        country.continents.forEach(continent => {
                            if (state.continents[continent]) {
                                state.continents[continent].push(country);
                            }
                        });
                    }
                });

                // Sort countries alphabetically within each continent
                for (const continent in state.continents) {
                    state.continents[continent].sort((a, b) => 
                        a.name.common.localeCompare(b.name.common)
                    );
                }
            }

            // Render continent buttons
            function renderContinents() {
                elements.continentButtons.innerHTML = '';
                for (const continent in state.continents) {
                    const button = document.createElement('button');
                    button.className = 'p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition';
                    button.textContent = continent;
                    button.addEventListener('click', () => showCountriesByContinent(continent));
                    elements.continentButtons.appendChild(button);
                }
            }

            // Show countries for a selected continent
            function showCountriesByContinent(continent) {
                elements.countryList.innerHTML = '';
                state.continents[continent].forEach(country => {
                    const countryElement = document.createElement('div');
                    countryElement.className = 'p-3 hover:bg-gray-100 rounded-lg cursor-pointer flex items-center';
                    countryElement.innerHTML = `
                        <span class="mr-2">${country.flag}</span>
                        ${country.name.common}
                    `;
                    countryElement.addEventListener('click', () => showCountryDetails(country));
                    elements.countryList.appendChild(countryElement);
                });
            }

            // Show details for a selected country
            function showCountryDetails(country) {
                state.currentCountry = country;
                elements.countryInfo.classList.remove('hidden');
                
                // Update basic info
                document.getElementById('countryName').textContent = country.name.common;
                document.getElementById('countryArea').textContent = country.area ? country.area.toLocaleString() : 'N/A';
                document.getElementById('countryPopulation').textContent = country.population.toLocaleString();
                document.getElementById('countryCapital').textContent = country.capital ? country.capital.join(', ') : 'N/A';
                
                // Currencies
                if (country.currencies) {
                    const currencies = Object.values(country.currencies).map(c => `${c.name} (${c.symbol || ''})`);
                    document.getElementById('countryCurrency').textContent = currencies.join(', ');
                } else {
                    document.getElementById('countryCurrency').textContent = 'N/A';
                }
                
                // Languages
                if (country.languages) {
                    document.getElementById('countryLanguages').textContent = Object.values(country.languages).join(', ');
                } else {
                    document.getElementById('countryLanguages').textContent = 'N/A';
                }
                
                // Timezone
                document.getElementById('countryTimezone').textContent = country.timezones ? country.timezones[0] : 'N/A';
                
                // Flag
                document.getElementById('countryFlag').src = country.flags.png;
                document.getElementById('countryFlag').alt = `Flag of ${country.name.common}`;
                
                // Visa info (simplified)
                document.getElementById('countryVisa').textContent = 'Check with local embassy'; // In real app, you'd have a database
                
                // Update map to highlight selected country
                updateMapForCountry(country);
                
                // Load tourist places (mock data)
                loadTouristPlaces(country);
                
                // Load weather data
                if (country.capital && country.capital.length > 0) {
                    fetchWeatherData(country.capital[0]);
                }
                
                // Show comparison and currency tools
                elements.comparisonTool.classList.remove('hidden');
                elements.currencyConverter.classList.remove('hidden');
            }

            // Update map for selected country
            function updateMapForCountry(country) {
                // In a real app, you would fetch GeoJSON data for the country
                // and highlight it on the map. This is a simplified version.
                
                // Get approximate coordinates (using capital or first latlng)
                let lat = 0, lng = 0;
                if (country.latlng && country.latlng.length >= 2) {
                    [lat, lng] = country.latlng;
                } else if (country.capitalInfo && country.capitalInfo.latlng) {
                    [lat, lng] = country.capitalInfo.latlng;
                }
                
                // Zoom to country
                map.setView([lat, lng], 5);
                
                // In a real app, you would add a polygon overlay for the country
                // For now, we'll just add a marker
                map.eachLayer(layer => {
                    if (layer instanceof L.Marker) {
                        map.removeLayer(layer);
                    }
                });
                
                if (lat !== 0 || lng !== 0) {
                    L.marker([lat, lng]).addTo(map)
                        .bindPopup(`<b>${country.name.common}</b><br>${country.capital ? 'Capital: ' + country.capital[0] : ''}`);
                }
            }

            // Load tourist places (mock data)
            function loadTouristPlaces(country) {
                const placesContainer = document.getElementById('touristPlaces');
                placesContainer.innerHTML = '';
                
                // Mock data - in a real app you'd fetch from an API
                const mockPlaces = {
                    'France': ['Eiffel Tower', 'Louvre Museum', 'Mont Saint-Michel'],
                    'Italy': ['Colosseum', 'Venice Canals', 'Leaning Tower of Pisa'],
                    'Japan': ['Mount Fuji', 'Tokyo Tower', 'Fushimi Inari Shrine'],
                    'USA': ['Statue of Liberty', 'Grand Canyon', 'Times Square'],
                    'default': ['Capital City', 'National Museum', 'Main Square']
                };
                
                const places = mockPlaces[country.name.common] || mockPlaces['default'];
                
                places.forEach(place => {
                    const placeElement = document.createElement('div');
                    placeElement.className = 'bg-blue-50 p-3 rounded-lg';
                    placeElement.textContent = place;
                    placesContainer.appendChild(placeElement);
                });
            }

            // Fetch weather data
            function fetchWeatherData(city) {
                // In a real app, you would use a weather API like OpenWeatherMap
                // This is a mock implementation
                
                // Mock weather data
                const mockWeather = {
                    condition: 'Sunny',
                    temp: Math.round(Math.random() * 30 + 10),
                    humidity: Math.round(Math.random() * 50 + 30),
                    icon: '☀️'
                };
                
                document.getElementById('weatherCondition').textContent = mockWeather.condition;
                document.getElementById('weatherTemp').textContent = mockWeather.temp;
                document.getElementById('weatherHumidity').textContent = mockWeather.humidity;
                document.getElementById('weatherIcon').textContent = mockWeather.icon;
            }

            // Search autocomplete
            function populateSearchAutocomplete() {
                elements.searchInput.addEventListener('input', function() {
                    const query = this.value.toLowerCase();
                    if (query.length < 2) {
                        elements.autocompleteResults.classList.add('hidden');
                        return;
                    }
                    
                    const matches = state.countries.filter(country => 
                        country.name.common.toLowerCase().includes(query)
                    ).slice(0, 5);
                    
                    if (matches.length > 0) {
                        elements.autocompleteResults.innerHTML = '';
                        matches.forEach(country => {
                            const item = document.createElement('div');
                            item.className = 'p-3 hover:bg-gray-100 cursor-pointer';
                            item.innerHTML = `
                                <div class="flex items-center">
                                    <span class="mr-2">${country.flag}</span>
                                    ${country.name.common}
                                </div>
                            `;
                            item.addEventListener('click', () => {
                                showCountryDetails(country);
                                elements.autocompleteResults.classList.add('hidden');
                                elements.searchInput.value = country.name.common;
                            });
                            elements.autocompleteResults.appendChild(item);
                        });
                        elements.autocompleteResults.classList.remove('hidden');
                    } else {
                        elements.autocompleteResults.classList.add('hidden');
                    }
                });
                
                // Hide autocomplete when clicking elsewhere
                document.addEventListener('click', function(e) {
                    if (e.target !== elements.searchInput) {
                        elements.autocompleteResults.classList.add('hidden');
                    }
                });
            }

            // Dark mode toggle
            elements.darkModeToggle.addEventListener('click', function() {
                state.darkMode = !state.darkMode;
                document.body.classList.toggle('dark-mode', state.darkMode);
                this.textContent = state.darkMode ? 'Light' : 'Dark';
                
                // Save preference to localStorage
                localStorage.setItem('darkMode', state.darkMode);
            });

            // Language toggle (placeholder functionality)
            elements.languageToggle.addEventListener('click', function() {
                state.language = state.language === 'en' ? 'bn' : 'en';
                this.textContent = state.language === 'en' ? 'বাংলা' : 'English';
                
                // In a real app, you would implement actual translation
                alert('Language changed to ' + (state.language === 'en' ? 'English' : 'Bengali'));
            });

            // Text-to-speech
            elements.speakButton.addEventListener('click', function() {
                if (!state.currentCountry) return;
                
                const text = `Information about ${state.currentCountry.name.common}. 
                    Capital: ${state.currentCountry.capital ? state.currentCountry.capital[0] : 'unknown'}. 
                    Population: ${state.currentCountry.population.toLocaleString()}. 
                    Area: ${state.currentCountry.area ? state.currentCountry.area.toLocaleString() : 'unknown'} square kilometers.`;
                
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    window.speechSynthesis.speak(utterance);
                } else {
                    alert('Text-to-speech not supported in your browser');
                }
            });

            // Export as PDF (placeholder)
            elements.exportButton.addEventListener('click', function() {
                if (!state.currentCountry) {
                    alert('Please select a country first');
                    return;
                }
                
                // In a real app, you would use a library like jsPDF
                alert('Exporting information about ' + state.currentCountry.name.common + ' as PDF');
            });

            // AI button (placeholder)
            elements.aiButton.addEventListener('click', function() {
                alert('AI assistant feature would go here');
            });

            // Populate comparison selects
            function populateComparisonSelects() {
                const select1 = document.getElementById('compareCountry1');
                const select2 = document.getElementById('compareCountry2');
                
                select1.innerHTML = '';
                select2.innerHTML = '';
                
                // Add empty option
                const emptyOption = document.createElement('option');
                emptyOption.value = '';
                emptyOption.textContent = 'Select country';
                select1.appendChild(emptyOption.cloneNode(true));
                select2.appendChild(emptyOption.cloneNode(true));
                
                // Add all countries
                state.countries.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country.cca3;
                    option.textContent = country.name.common;
                    select1.appendChild(option.cloneNode(true));
                    select2.appendChild(option.cloneNode(true));
                });
                
                // Compare button handler
                document.getElementById('compareButton').addEventListener('click', function() {
                    const country1Code = select1.value;
                    const country2Code = select2.value;
                    
                    if (!country1Code || !country2Code) {
                        alert('Please select two countries to compare');
                        return;
                    }
                    
                    const country1 = state.countries.find(c => c.cca3 === country1Code);
                    const country2 = state.countries.find(c => c.cca3 === country2Code);
                    
                    if (country1 && country2) {
                        showComparisonResults(country1, country2);
                    }
                });
            }

            // Show comparison results
            function showComparisonResults(country1, country2) {
                const resultsDiv = document.getElementById('comparisonResults');
                resultsDiv.innerHTML = '';
                resultsDiv.classList.remove('hidden');
                
                // Create comparison table
                const table = document.createElement('table');
                table.className = 'min-w-full divide-y divide-gray-200';
                
                // Table header
                const thead = document.createElement('thead');
                thead.className = 'bg-gray-50';
                thead.innerHTML = `
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Metric</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">${country1.name.common}</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">${country2.name.common}</th>
                    </tr>
                `;
                table.appendChild(thead);
                
                // Table body
                const tbody = document.createElement('tbody');
                tbody.className = 'bg-white divide-y divide-gray-200';
                
                // Add comparison rows
                addComparisonRow(tbody, 'Population', country1.population, country2.population);
                addComparisonRow(tbody, 'Area (km²)', country1.area, country2.area);
                addComparisonRow(tbody, 'Capital', country1.capital ? country1.capital[0] : 'N/A', country2.capital ? country2.capital[0] : 'N/A');
                
                table.appendChild(tbody);
                resultsDiv.appendChild(table);
            }

            // Add a row to comparison table
            function addComparisonRow(tbody, metric, value1, value2) {
                const row = document.createElement('tr');
                
                // Format values
                let display1 = value1;
                let display2 = value2;
                
                if (typeof value1 === 'number') {
                    display1 = value1.toLocaleString();
                    display2 = value2.toLocaleString();
                    
                    // Add comparison indicator
                    if (value1 > value2) {
                        display1 += ' ▲';
                        display2 += ' ▼';
                    } else if (value1 < value2) {
                        display1 += ' ▼';
                        display2 += ' ▲';
                    } else {
                        display1 += ' =';
                        display2 += ' =';
                    }
                }
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${metric}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${display1}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${display2}</td>
                `;
                tbody.appendChild(row);
            }

            // Populate currency selects
            function populateCurrencySelects() {
                const fromSelect = document.getElementById('convertFrom');
                const toSelect = document.getElementById('convertTo');
                
                // Get unique currencies from all countries
                const currencies = new Set();
                state.countries.forEach(country => {
                    if (country.currencies) {
                        Object.keys(country.currencies).forEach(code => {
                            currencies.add(`${code} - ${country.currencies[code].name}`);
                        });
                    }
                });
                
                // Add to selects
                fromSelect.innerHTML = '';
                toSelect.innerHTML = '';
                
                // Add empty option
                const emptyOption = document.createElement('option');
                emptyOption.value = '';
                emptyOption.textContent = 'Select currency';
                fromSelect.appendChild(emptyOption.cloneNode(true));
                toSelect.appendChild(emptyOption.cloneNode(true));
                
                // Add currencies
                currencies.forEach(currency => {
                    const option = document.createElement('option');
                    option.value = currency.split(' - ')[0]; // Use currency code
                    option.textContent = currency;
                    fromSelect.appendChild(option.cloneNode(true));
                    toSelect.appendChild(option.cloneNode(true));
                });
                
                // Set default to USD and BDT
                Array.from(fromSelect.options).forEach(opt => {
                    if (opt.value === 'USD') opt.selected = true;
                });
                Array.from(toSelect.options).forEach(opt => {
                    if (opt.value === 'BDT') opt.selected = true;
                });
                
                // Convert button handler
                document.getElementById('convertButton').addEventListener('click', function() {
                    const amount = parseFloat(document.getElementById('convertAmount').value);
                    const fromCurrency = fromSelect.value;
                    const toCurrency = toSelect.value;
                    
                    if (!amount || !fromCurrency || !toCurrency) {
                        alert('Please fill all fields');
                        return;
                    }
                    
                    // In a real app, you would fetch real exchange rates
                    // This is a mock implementation with fixed rates
                    const mockRates = {
                        'USD': { 'BDT': 110, 'EUR': 0.85, 'JPY': 110 },
                        'EUR': { 'USD': 1.18, 'BDT': 130, 'JPY': 130 },
                        'BDT': { 'USD': 0.0091, 'EUR': 0.0077, 'JPY': 0.12 },
                        'JPY': { 'USD': 0.0091, 'EUR': 0.0077, 'BDT': 1.2 }
                    };
                    
                    let rate = 1;
                    if (mockRates[fromCurrency] && mockRates[fromCurrency][toCurrency]) {
                        rate = mockRates[fromCurrency][toCurrency];
                    } else if (mockRates[toCurrency] && mockRates[toCurrency][fromCurrency]) {
                        rate = 1 / mockRates[toCurrency][fromCurrency];
                    } else {
                        rate = Math.random() * 10; // Fallback random rate
                    }
                    
                    const result = amount * rate;
                    const resultDiv = document.getElementById('conversionResult');
                    resultDiv.innerHTML = `
                        ${amount} ${fromCurrency} = ${result.toFixed(2)} ${toCurrency}
                    `;
                    resultDiv.classList.remove('hidden');
                });
            }

            // Check for saved dark mode preference
            if (localStorage.getItem('darkMode') === 'true') {
                state.darkMode = true;
                document.body.classList.add('dark-mode');
                elements.darkModeToggle.textContent = 'Light';
            }
        });
    </script>
</body>
</html>
